
// src/app/(app)/customers/components/customer-table.tsx
"use client";

import type { Customer } from "@/lib/types";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar";
import { Badge } from "@/components/ui/badge";
import { CustomerActions } from "./customer-actions";
import { format } from "date-fns";
import { cn } from "@/lib/utils";

interface CustomerTableProps {
  customers: Customer[];
}

const defaultUnknownAvatarUrl = "data:image/png;base64,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";
const defaultMaleAvatarUrl = "data:image/png;base64,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";
const defaultFemaleAvatarUrl = "data:image/png;base64,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";

const getAvatarHint = (customer: Customer): string => {
  if (customer.profilePictureUrl && customer.profilePictureUrl !== defaultUnknownAvatarUrl) {
    return "profile photo"; // Custom image uploaded
  }
  switch (customer.gender) {
    case "male":
      return "male avatar";
    case "female":
      return "female avatar";
    case "unknown":
    default:
      return "profile avatar";
  }
};

const getAvatarUrl = (customer: Customer): string => {
  if (customer.profilePictureUrl && customer.profilePictureUrl !== defaultUnknownAvatarUrl) {
    return "profile photo"; // Custom image uploaded
  }
  switch (customer.gender) {
    case "male":
      return defaultMaleAvatarUrl;
    case "female":
      return defaultFemaleAvatarUrl;
    case "unknown":
    default:
      return defaultUnknownAvatarUrl;
  }
};

export function CustomerTable({ customers }: CustomerTableProps) {
  return (
    <Table>
      <TableHeader>
        <TableRow>
          <TableHead className="w-[80px]">Avatar</TableHead>
          <TableHead>Name</TableHead>
          <TableHead>Email</TableHead>
          <TableHead>Company</TableHead>
          <TableHead className="hidden sm:table-cell">Gender</TableHead>
          <TableHead className="hidden md:table-cell">Hourly Rate</TableHead>
          <TableHead className="hidden lg:table-cell">Joined</TableHead>
          <TableHead className="text-right">Actions</TableHead>
        </TableRow>
      </TableHeader>
      <TableBody>
        {customers.map((customer) => (
          <TableRow key={customer.id}>
            <TableCell>
              <Avatar className="h-10 w-10">
                <AvatarImage 
                  src={customer.profilePictureUrl || getAvatarUrl(customer)}
                  alt={customer.name} 
                  data-ai-hint={getAvatarHint(customer)}
                />
                <AvatarFallback>{customer.name.substring(0, 2).toUpperCase()}</AvatarFallback>
              </Avatar>
            </TableCell>
            <TableCell className="font-medium">{customer.name}</TableCell>
            <TableCell>{customer.email}</TableCell>
            <TableCell>{customer.company || "-"}</TableCell>
            <TableCell className="hidden sm:table-cell capitalize">{customer.gender}</TableCell>
            <TableCell className="hidden md:table-cell">₱{customer.hourlyRate.toFixed(2)}</TableCell>
            <TableCell className="hidden lg:table-cell">{format(new Date(customer.createdAt), "MMM d, yyyy")}</TableCell>
            <TableCell className="text-right">
              <CustomerActions customer={customer} />
            </TableCell>
          </TableRow>
        ))}
      </TableBody>
    </Table>
  );
}
